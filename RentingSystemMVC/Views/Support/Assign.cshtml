@model List<RentingSystemMVC.Models.Support>

<head>
    <title>title</title>
</head>
<div class="container">
    <h1>Unassigned Tickets</h1>
    <h6 class="text-black text-opacity-50">Choose a ticket to assign to you</h6>
    <form asp-controller="Support" asp-action="Assign" method="post">
        <table class="table table-hover">
            <thead>
            <tr>
                <th scope="col"></th>
                <th scope="col">Ticket ID</th>
                <th scope="col">Subject</th>
                <th scope="col">Email</th>
                <th scope="col">Created On</th>
                <th scope="col">Updated On</th>
                <th scope="col">Status</th>
            </tr>
            </thead>
            <tbody>
            @foreach (var ticket in Model)
            {
                <tr>
                    <th>
                        <input class="form-check-input" type="checkbox" name="selectedTickets" value="@ticket._id" id="flexCheckDefault">
                    </th>
                    <th scope="row">#@ticket._id</th>
                    <td>@ticket.subject</td>
                    <td>@ticket.email</td>
                    <td>@ticket.creationDate</td>
                    <td>@ticket.updatedDate</td>
                    <td>@ticket.status</td>
                </tr>
            }
            </tbody>
            <tfoot>
            <tr>
            <td colspan="7" class="text-end">
                <button type="submit" id="assignButton" class="btn btn-primary">Assign</button>
            </td>
            </tfoot>
        </table>
    </form>
</div>

@section Scripts{
    <script>
    // Get all checkboxes and the button
    var checkboxes = document.querySelectorAll('input[type="checkbox"]');
    var assignButton = document.getElementById('assignButton');

    // Function to check if at least one checkbox is checked
    function checkCheckboxes() {
        var checked = Array.from(checkboxes).some(checkbox => checkbox.checked);
        assignButton.disabled = !checked;
    }

    // Add event listener to all checkboxes
    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', checkCheckboxes);
    });

    // Call the function initially to set the correct state of the button
    checkCheckboxes();
</script>
}